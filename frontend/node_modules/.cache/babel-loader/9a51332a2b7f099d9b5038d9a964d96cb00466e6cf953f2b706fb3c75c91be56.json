{"ast":null,"code":"var _jsxFileName = \"D:\\\\nexused\\\\frontend\\\\src\\\\components\\\\Profile.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport useProfile from \"../hooks/useProfile\";\nimport ProfileHeader from \"./ProfileHeader\";\nimport StudyGroups from \"./ProfileGroups\";\nimport UserPosts from \"./UserPosts\";\nimport { profileStyles } from \"../styles/profileStyles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Profile() {\n  _s();\n  const {\n    user,\n    setUser,\n    authLoading,\n    posts,\n    setPosts,\n    isPostsLoading,\n    joinedGroups,\n    isGroupsLoading,\n    bio,\n    setBio,\n    username,\n    setUsername,\n    profilePicture,\n    setProfilePicture,\n    isEditing,\n    setIsEditing,\n    error,\n    setError,\n    uploadError,\n    setUploadError,\n    success,\n    setSuccess,\n    isLoading,\n    setIsLoading,\n    sortOption,\n    setSortOption,\n    imageLoadError,\n    setImageLoadError,\n    setTemporaryMessage,\n    setTemporarySuccess,\n    handleProfilePictureChange,\n    handleBioUpdate,\n    BIO_MAX_LENGTH,\n    USERNAME_MIN_LENGTH,\n    USERNAME_MAX_LENGTH,\n    DEFAULT_BIO\n  } = useProfile();\n  const handleRemoveProfilePicture = async () => {\n    try {\n      setIsLoading(true);\n      setUploadError(\"\");\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        throw new Error(\"Authentication token missing. Please log in again.\");\n      }\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/users/me/profile-picture`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || \"Failed to remove profile picture\");\n      }\n      const updatedUser = await response.json();\n      setUser(updatedUser);\n      setProfilePicture(null);\n      setImageLoadError(false);\n      setTemporarySuccess(setSuccess, () => setSuccess, \"Profile picture removed successfully!\");\n    } catch (err) {\n      setTemporaryMessage(setUploadError, () => setUploadError, err.message || \"Failed to remove profile picture\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  if (authLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-gray-600 dark:text-gray-400 py-10 animate-pulse\",\n      children: \"Loading profile...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center text-gray-600 dark:text-gray-400\",\n      children: \"Please log in to view your profile.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 dark:bg-gray-800\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: profileStyles\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-10\",\n      children: [/*#__PURE__*/_jsxDEV(ProfileHeader, {\n        user: user,\n        bio: bio,\n        setBio: setBio,\n        username: username,\n        setUsername: setUsername,\n        profilePicture: profilePicture,\n        setProfilePicture: setProfilePicture,\n        isEditing: isEditing,\n        setIsEditing: setIsEditing,\n        error: error,\n        setError: setError,\n        success: success,\n        setSuccess: setSuccess,\n        uploadError: uploadError,\n        isLoading: isLoading,\n        handleProfilePictureChange: handleProfilePictureChange,\n        handleBioUpdate: handleBioUpdate,\n        imageLoadError: imageLoadError,\n        setImageLoadError: setImageLoadError,\n        posts: posts,\n        joinedGroups: joinedGroups,\n        BIO_MAX_LENGTH: BIO_MAX_LENGTH,\n        USERNAME_MIN_LENGTH: USERNAME_MIN_LENGTH,\n        USERNAME_MAX_LENGTH: USERNAME_MAX_LENGTH,\n        DEFAULT_BIO: DEFAULT_BIO,\n        setTemporaryMessage: setTemporaryMessage,\n        setTemporarySuccess: setTemporarySuccess,\n        handleRemoveProfilePicture: handleRemoveProfilePicture\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StudyGroups, {\n        joinedGroups: joinedGroups,\n        isGroupsLoading: isGroupsLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(UserPosts, {\n        posts: posts,\n        isPostsLoading: isPostsLoading,\n        sortOption: sortOption,\n        setSortOption: setSortOption,\n        setPosts: setPosts,\n        currentUser: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"xo2MqnoDe8rWulQTsWoJ12uA8gg=\", false, function () {\n  return [useProfile];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useProfile","ProfileHeader","StudyGroups","UserPosts","profileStyles","jsxDEV","_jsxDEV","Profile","_s","user","setUser","authLoading","posts","setPosts","isPostsLoading","joinedGroups","isGroupsLoading","bio","setBio","username","setUsername","profilePicture","setProfilePicture","isEditing","setIsEditing","error","setError","uploadError","setUploadError","success","setSuccess","isLoading","setIsLoading","sortOption","setSortOption","imageLoadError","setImageLoadError","setTemporaryMessage","setTemporarySuccess","handleProfilePictureChange","handleBioUpdate","BIO_MAX_LENGTH","USERNAME_MIN_LENGTH","USERNAME_MAX_LENGTH","DEFAULT_BIO","handleRemoveProfilePicture","token","localStorage","getItem","Error","response","fetch","process","env","REACT_APP_API_URL","method","headers","Authorization","ok","errorData","json","message","updatedUser","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","currentUser","_c","$RefreshReg$"],"sources":["D:/nexused/frontend/src/components/Profile.js"],"sourcesContent":["import React from \"react\";\r\nimport useProfile from \"../hooks/useProfile\";\r\nimport ProfileHeader from \"./ProfileHeader\";\r\nimport StudyGroups from \"./ProfileGroups\";\r\nimport UserPosts from \"./UserPosts\";\r\nimport { profileStyles } from \"../styles/profileStyles\";\r\n\r\nfunction Profile() {\r\n  const {\r\n    user,\r\n    setUser,\r\n    authLoading,\r\n    posts,\r\n    setPosts,\r\n    isPostsLoading,\r\n    joinedGroups,\r\n    isGroupsLoading,\r\n    bio,\r\n    setBio,\r\n    username,\r\n    setUsername,\r\n    profilePicture,\r\n    setProfilePicture,\r\n    isEditing,\r\n    setIsEditing,\r\n    error,\r\n    setError,\r\n    uploadError,\r\n    setUploadError,\r\n    success,\r\n    setSuccess,\r\n    isLoading,\r\n    setIsLoading,\r\n    sortOption,\r\n    setSortOption,\r\n    imageLoadError,\r\n    setImageLoadError,\r\n    setTemporaryMessage,\r\n    setTemporarySuccess,\r\n    handleProfilePictureChange,\r\n    handleBioUpdate,\r\n    BIO_MAX_LENGTH,\r\n    USERNAME_MIN_LENGTH,\r\n    USERNAME_MAX_LENGTH,\r\n    DEFAULT_BIO,\r\n  } = useProfile();\r\n\r\n  const handleRemoveProfilePicture = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setUploadError(\"\");\r\n\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        throw new Error(\"Authentication token missing. Please log in again.\");\r\n      }\r\n\r\n      const response = await fetch(\r\n        `${process.env.REACT_APP_API_URL}/api/users/me/profile-picture`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(\r\n          errorData.message || \"Failed to remove profile picture\"\r\n        );\r\n      }\r\n\r\n      const updatedUser = await response.json();\r\n      setUser(updatedUser);\r\n      setProfilePicture(null);\r\n      setImageLoadError(false);\r\n      setTemporarySuccess(\r\n        setSuccess,\r\n        () => setSuccess,\r\n        \"Profile picture removed successfully!\"\r\n      );\r\n    } catch (err) {\r\n      setTemporaryMessage(\r\n        setUploadError,\r\n        () => setUploadError,\r\n        err.message || \"Failed to remove profile picture\"\r\n      );\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"text-gray-600 dark:text-gray-400 py-10 animate-pulse\">\r\n        Loading profile...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center text-gray-600 dark:text-gray-400\">\r\n        Please log in to view your profile.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-800\">\r\n      <style>{profileStyles}</style>\r\n      <div className=\"container mx-auto px-4 py-10\">\r\n        <ProfileHeader\r\n          user={user}\r\n          bio={bio}\r\n          setBio={setBio}\r\n          username={username}\r\n          setUsername={setUsername}\r\n          profilePicture={profilePicture}\r\n          setProfilePicture={setProfilePicture}\r\n          isEditing={isEditing}\r\n          setIsEditing={setIsEditing}\r\n          error={error}\r\n          setError={setError}\r\n          success={success}\r\n          setSuccess={setSuccess}\r\n          uploadError={uploadError}\r\n          isLoading={isLoading}\r\n          handleProfilePictureChange={handleProfilePictureChange}\r\n          handleBioUpdate={handleBioUpdate}\r\n          imageLoadError={imageLoadError}\r\n          setImageLoadError={setImageLoadError}\r\n          posts={posts}\r\n          joinedGroups={joinedGroups}\r\n          BIO_MAX_LENGTH={BIO_MAX_LENGTH}\r\n          USERNAME_MIN_LENGTH={USERNAME_MIN_LENGTH}\r\n          USERNAME_MAX_LENGTH={USERNAME_MAX_LENGTH}\r\n          DEFAULT_BIO={DEFAULT_BIO}\r\n          setTemporaryMessage={setTemporaryMessage}\r\n          setTemporarySuccess={setTemporarySuccess}\r\n          handleRemoveProfilePicture={handleRemoveProfilePicture}\r\n        />\r\n        <StudyGroups\r\n          joinedGroups={joinedGroups}\r\n          isGroupsLoading={isGroupsLoading}\r\n        />\r\n        <UserPosts\r\n          posts={posts}\r\n          isPostsLoading={isPostsLoading}\r\n          sortOption={sortOption}\r\n          setSortOption={setSortOption}\r\n          setPosts={setPosts}\r\n          currentUser={user}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}