{"ast":null,"code":"import React,{memo,useEffect}from\"react\";import{Tab,Nav,Spinner,Alert}from\"react-bootstrap\";import useProfile from\"../hooks/useProfile\";import ProfileHeader from\"./ProfileHeader\";import ProfileGroups from\"./ProfileGroups\";import UserPosts from\"./UserPosts\";import\"../styles/profileStyles.css\";// Use memo to prevent unnecessary re-renders\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=/*#__PURE__*/memo(function Profile(){const{user,authLoading,posts,setPosts,isPostsLoading,joinedGroups,isGroupsLoading,bio,setBio,username,setUsername,profilePicture,isEditing,setIsEditing,error,uploadError,setUploadError,success,isLoading,sortOption,setSortOption,imageLoadError,setImageLoadError,setTemporaryMessage,setTemporarySuccess,handleProfilePictureChange,handleRemoveProfilePicture,handleBioUpdate,BIO_MAX_LENGTH,USERNAME_MIN_LENGTH,USERNAME_MAX_LENGTH,DEFAULT_BIO}=useProfile();// Clear error and success messages after 3 seconds\nuseEffect(()=>{if(error){const timer=setTimeout(()=>{setTemporaryMessage(null,null,\"\");},3000);return()=>clearTimeout(timer);}},[error,setTemporaryMessage]);useEffect(()=>{if(success){const timer=setTimeout(()=>{setTemporarySuccess(null,null,\"\");},3000);return()=>clearTimeout(timer);}},[success,setTemporarySuccess]);if(authLoading){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 text-secondary\",children:\"Loading profile...\"})]});}if(!user){return/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"Not Logged In\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please log in to view your profile.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fade-in-up\",children:[error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",className:\"mb-4\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",className:\"mb-4\",children:success}),/*#__PURE__*/_jsx(ProfileHeader,{user:user,bio:bio,setBio:setBio,username:username,setUsername:setUsername,profilePicture:profilePicture,isEditing:isEditing,setIsEditing:setIsEditing,uploadError:uploadError,setUploadError:setUploadError,isLoading:isLoading,imageLoadError:imageLoadError,setImageLoadError:setImageLoadError,handleProfilePictureChange:handleProfilePictureChange,handleRemoveProfilePicture:handleRemoveProfilePicture,handleBioUpdate:handleBioUpdate,BIO_MAX_LENGTH:BIO_MAX_LENGTH,USERNAME_MIN_LENGTH:USERNAME_MIN_LENGTH,USERNAME_MAX_LENGTH:USERNAME_MAX_LENGTH,DEFAULT_BIO:DEFAULT_BIO}),/*#__PURE__*/_jsxs(Tab.Container,{id:\"profile-tabs\",defaultActiveKey:\"posts\",children:[/*#__PURE__*/_jsxs(Nav,{variant:\"tabs\",className:\"mb-4 justify-content-center\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"posts\",className:\"px-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-newspaper me-2\"}),\"Posts (\",posts.length,\")\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"groups\",className:\"px-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users me-2\"}),\"Groups (\",joinedGroups.length,\")\"]})})]}),/*#__PURE__*/_jsxs(Tab.Content,{children:[/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"posts\",children:/*#__PURE__*/_jsx(UserPosts,{posts:posts,setPosts:setPosts,isLoading:isPostsLoading,userId:user.id,sortOption:sortOption,setSortOption:setSortOption,setTemporaryMessage:setTemporaryMessage,setTemporarySuccess:setTemporarySuccess})}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"groups\",children:/*#__PURE__*/_jsx(ProfileGroups,{groups:joinedGroups,isLoading:isGroupsLoading})})]})]})]});});export default Profile;","map":{"version":3,"names":["React","memo","useEffect","Tab","Nav","Spinner","Alert","useProfile","ProfileHeader","ProfileGroups","UserPosts","jsx","_jsx","jsxs","_jsxs","Profile","user","authLoading","posts","setPosts","isPostsLoading","joinedGroups","isGroupsLoading","bio","setBio","username","setUsername","profilePicture","isEditing","setIsEditing","error","uploadError","setUploadError","success","isLoading","sortOption","setSortOption","imageLoadError","setImageLoadError","setTemporaryMessage","setTemporarySuccess","handleProfilePictureChange","handleRemoveProfilePicture","handleBioUpdate","BIO_MAX_LENGTH","USERNAME_MIN_LENGTH","USERNAME_MAX_LENGTH","DEFAULT_BIO","timer","setTimeout","clearTimeout","className","children","animation","variant","Heading","Container","id","defaultActiveKey","Item","Link","eventKey","length","Content","Pane","userId","groups"],"sources":["/mnt/d/Projects/NexusEd/frontend/src/components/Profile.js"],"sourcesContent":["import React, { memo, useEffect } from \"react\";\r\nimport { Tab, Nav, Spinner, Alert } from \"react-bootstrap\";\r\nimport useProfile from \"../hooks/useProfile\";\r\nimport ProfileHeader from \"./ProfileHeader\";\r\nimport ProfileGroups from \"./ProfileGroups\";\r\nimport UserPosts from \"./UserPosts\";\r\nimport \"../styles/profileStyles.css\";\r\n\r\n// Use memo to prevent unnecessary re-renders\r\nconst Profile = memo(function Profile() {\r\n  const {\r\n    user,\r\n    authLoading,\r\n    posts,\r\n    setPosts,\r\n    isPostsLoading,\r\n    joinedGroups,\r\n    isGroupsLoading,\r\n    bio,\r\n    setBio,\r\n    username,\r\n    setUsername,\r\n    profilePicture,\r\n    isEditing,\r\n    setIsEditing,\r\n    error,\r\n    uploadError,\r\n    setUploadError,\r\n    success,\r\n    isLoading,\r\n    sortOption,\r\n    setSortOption,\r\n    imageLoadError,\r\n    setImageLoadError,\r\n    setTemporaryMessage,\r\n    setTemporarySuccess,\r\n    handleProfilePictureChange,\r\n    handleRemoveProfilePicture,\r\n    handleBioUpdate,\r\n    BIO_MAX_LENGTH,\r\n    USERNAME_MIN_LENGTH,\r\n    USERNAME_MAX_LENGTH,\r\n    DEFAULT_BIO,\r\n  } = useProfile();\r\n\r\n  // Clear error and success messages after 3 seconds\r\n  useEffect(() => {\r\n    if (error) {\r\n      const timer = setTimeout(() => {\r\n        setTemporaryMessage(null, null, \"\");\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [error, setTemporaryMessage]);\r\n\r\n  useEffect(() => {\r\n    if (success) {\r\n      const timer = setTimeout(() => {\r\n        setTemporarySuccess(null, null, \"\");\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [success, setTemporarySuccess]);\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"text-center py-5\">\r\n        <Spinner animation=\"border\" variant=\"primary\" />\r\n        <p className=\"mt-3 text-secondary\">Loading profile...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <Alert variant=\"info\" className=\"text-center py-5\">\r\n        <Alert.Heading>Not Logged In</Alert.Heading>\r\n        <p>Please log in to view your profile.</p>\r\n      </Alert>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"animate-fade-in-up\">\r\n      {error && (\r\n        <Alert variant=\"danger\" className=\"mb-4\">\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {success && (\r\n        <Alert variant=\"success\" className=\"mb-4\">\r\n          {success}\r\n        </Alert>\r\n      )}\r\n\r\n      <ProfileHeader\r\n        user={user}\r\n        bio={bio}\r\n        setBio={setBio}\r\n        username={username}\r\n        setUsername={setUsername}\r\n        profilePicture={profilePicture}\r\n        isEditing={isEditing}\r\n        setIsEditing={setIsEditing}\r\n        uploadError={uploadError}\r\n        setUploadError={setUploadError}\r\n        isLoading={isLoading}\r\n        imageLoadError={imageLoadError}\r\n        setImageLoadError={setImageLoadError}\r\n        handleProfilePictureChange={handleProfilePictureChange}\r\n        handleRemoveProfilePicture={handleRemoveProfilePicture}\r\n        handleBioUpdate={handleBioUpdate}\r\n        BIO_MAX_LENGTH={BIO_MAX_LENGTH}\r\n        USERNAME_MIN_LENGTH={USERNAME_MIN_LENGTH}\r\n        USERNAME_MAX_LENGTH={USERNAME_MAX_LENGTH}\r\n        DEFAULT_BIO={DEFAULT_BIO}\r\n      />\r\n\r\n      <Tab.Container id=\"profile-tabs\" defaultActiveKey=\"posts\">\r\n        <Nav variant=\"tabs\" className=\"mb-4 justify-content-center\">\r\n          <Nav.Item>\r\n            <Nav.Link eventKey=\"posts\" className=\"px-4\">\r\n              <i className=\"fas fa-newspaper me-2\"></i>\r\n              Posts ({posts.length})\r\n            </Nav.Link>\r\n          </Nav.Item>\r\n          <Nav.Item>\r\n            <Nav.Link eventKey=\"groups\" className=\"px-4\">\r\n              <i className=\"fas fa-users me-2\"></i>\r\n              Groups ({joinedGroups.length})\r\n            </Nav.Link>\r\n          </Nav.Item>\r\n        </Nav>\r\n\r\n        <Tab.Content>\r\n          <Tab.Pane eventKey=\"posts\">\r\n            <UserPosts\r\n              posts={posts}\r\n              setPosts={setPosts}\r\n              isLoading={isPostsLoading}\r\n              userId={user.id}\r\n              sortOption={sortOption}\r\n              setSortOption={setSortOption}\r\n              setTemporaryMessage={setTemporaryMessage}\r\n              setTemporarySuccess={setTemporarySuccess}\r\n            />\r\n          </Tab.Pane>\r\n          <Tab.Pane eventKey=\"groups\">\r\n            <ProfileGroups\r\n              groups={joinedGroups}\r\n              isLoading={isGroupsLoading}\r\n            />\r\n          </Tab.Pane>\r\n        </Tab.Content>\r\n      </Tab.Container>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}